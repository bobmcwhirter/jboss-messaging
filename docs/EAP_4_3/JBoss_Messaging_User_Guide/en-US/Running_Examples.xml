<?xml version="1.0" encoding="UTF-8"?>
<chapter id="examples">
  <title>JBoss Messaging Examples</title>
	<section>
		<title>About the Examples</title>
		<para>
			In the installation directory of your JBoss Enterprise Application Platform you will find a set of JBoss Messaging examples located in <literal>JBOSS_DIST/doc/examples/jboss-messaging-examples</literal>. These examples demonstrate JBoss Messaging in action. Within the <literal>JBOSS_DIST/doc/examples/jboss-messaging-examples</literal> directory, you will find the following sub-directories:
		</para>
		<itemizedlist>
		<listitem>
			<para>docs/examples/jboss-messaging-examples/queue</para>
			<para>This example demonstrates a simple 'send' and 'receive' to a remote queue
			using a JMS client.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/topic</para>
		
			<para>This example demonstrates a simple 'send' and 'receive' to a remote topic
			using a JMS client.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/mdb</para>
		
			<para>This example demonstrates the usage of an EJB2.1 MDB with JBoss
			Messaging.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/ejb3mdb</para>
		
			<para>This example demonstrates the usage of an EJB3 MDB with JBoss
			Messaging.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/stateless</para>
		
			<para>This example demonstrates an EJB2.1 stateless session bean
			interacting with JBoss Messaging.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/mdb-failure</para>
		
			<para>This example demonstrates rollback and redelivery occuring with
			an EJB2.1 MDB.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/secure-socket</para>
		
			<para>This example demonstrates a JMS client interacting with a JBoss
			Messaging server using SSL encrypted transport.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/http</para>
		
			<para>This example demonstrates a JMS client interacting with a JBoss
			Messaging server tunneling traffic over HTTP protocol.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/web-service</para>
		
			<para>This example demonstrates JBoss web-service interacting with
			JBoss Messaging.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/distributed-queue</para>
		
			<para>This example demonstrates a JMS client interacting with a JBoss
			Messaging distributed queue - it requires two JBoss Application Server instances to be
			running.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/distributed-topic</para>
		
			<para>This example demonstrates a JMS client interacting with a JBoss
			Messaging distributed topic - it requires two JBoss Application Server instances to be
			running.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/stateless-clustered</para>
		
			<para>This example demonstrates a JMS client interacting with a clustered EJB2.1 stateless session bean, which in turn interacts with
			JBoss Messaging. The example uses HAJNDI to lookup the connection
			factory. It requires two JBoss Application Server instances to be
			running.</para>
		</listitem>
		
		<listitem>
			<para>docs/examples/jboss-messaging-examples/bridge</para>
		
			<para>This example demonstrates the usage of a message bridge. It deploys a
			message bridge in JBoss Application Server which then proceeds to move messages from a
			source to a target queue.</para>
		</listitem>
		</itemizedlist>
	</section>
	<section>
		<title>Running the Examples</title>
		<section>
			<title>Install Ant</title>
			<para>
				To compile the examples, you must have Apache Ant 1.6+ installed in your machine. You can download it from <ulink url="http://ant.apache.org"></ulink> and have it installed in few steps: <itemizedlist>
					<listitem>
						<para>
							Unzip the downloaded file to the directory of your choice.
						</para>
					</listitem>
					<listitem>
						<para>
							Create an environment variable called <literal>ANT_HOME</literal> pointing to the Ant installation directory. You can do this by adding the following line to your <filename>.bashrc</filename> file (substituting with the actual location of the ant directory on your system): <programlisting>
	export ANT_HOME=/home/user/apache-ant-1.7.0
	</programlisting>
						</para>
						
						<para>
							On Windows you do this by opening the Control Panel from the Start Menu, switching it to classic view if necessary, then opening System/Advanced/Environment Variables. Create a new variable, call it <literal>ANT_HOME</literal> and set it to be the ant directory.
						</para>
					</listitem>
					<listitem>
						<para>
							Add <literal>$ANT_HOME/bin</literal> to the system path to be able to run <literal>ant</literal> from the command line. You can do this by adding the following line to your <filename>.bashrc</filename> file: <programlisting>
	export PATH=$PATH:$ANT_HOME/bin
	</programlisting>
						</para>
						<para>
							On Windows you do this by opening the Control Panel from the Start Menu, switching it to classic view if necessary, then editing the <literal>PATH</literal> environment variable found in System/Advanced/Environment Variables/System Variables/Path. Add a semicolon and the path to the ant <filename class="directory">bin</filename> directory.
						</para>
					</listitem>
					<listitem>
						<para>
							Verify your Ant installation. To do this type <literal> ant -version</literal> at the command prompt. Your output should look something like this: 
	<programlisting>
	Apache Ant version 1.7.0 compiled on December 13 2006
	</programlisting>
						</para>
					</listitem>
				</itemizedlist>
			</para>
		</section>
		<section>
			<title>Set JBOSS_HOME Environment Variable</title>
			<formalpara>
				<title>
					On a Linux Platform
				</title>
				<para>
					Create an environment variable that points to the installation directory (<filename>JBOSS_DIST/jboss-as</filename>) and call it <literal>JBOSS_HOME</literal>. Add <literal>$JBOSS_HOME/bin</literal> to the system path to be able to run the server from the command line. You can do this by adding the following lines to the <filename>.bashrc</filename> file in your home directory.
					<programlisting>
#In this example /home/vrenish/EnterprisePlatform-4.3/jboss-as is the installation directory.
export JBOSS_HOME=/home/vrenish/EnterprisePlatform-4.3/jboss-as
export PATH=$PATH:$JBOSS_HOME/bin 
					</programlisting>
				</para>
			</formalpara>
			<formalpara>
				<title>
					On Microsoft Windows
				</title>
				<para>
					Create an environment variable called <literal>JBOSS_HOME</literal> that points to the installation directory, for example: C:\Program Files\EnterprisePlatform-4.3\jboss-as\. In order to run the server from the command line add the <filename>bin</filename> directory to your path, for example: C:\Program Files\EnterprisePlatform-4.3\jboss-as\bin. To do this, open the Control Panel from the Start Menu, switch to Classic View if necessary, open the System Control Panel applet, select the Advanced Tab, and click on the Environment Variables button.
				</para>
			</formalpara>
		</section>
		<section>
			<title>Run the Example</title>
			<para>Make sure you start the JBoss Application server before trying to run the examples. The non clustered examples expect a single JBoss Application Server instance to be running with all the default settings. The clustered examples expect two JBoss Application Server instances to be running with ports settings as per ports-01 and ports-02. For each example, you can always override the default ports it will try to connect to by editing <literal>jndi.properties</literal> in the particular example's directory.</para>
			<para>To run any of the examples inside the <literal>JBOSS_DIST/doc/examples/jboss-messaging-examples</literal> directory, navigate to the example's folder in a command line prompt, and type <literal>ant</literal>. 
			</para>
		</section>
	</section>
</chapter>