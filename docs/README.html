<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>JBoss Messaging Release Notes</title>
</head>
<body>
<h1><br>
JBoss Messaging 1.0.0 Beta1 Release Notes</h1>
Mar 28, 2005<br>
<br>
$Revision$<br>
<br>
<span style="font-weight: bold;"><br>
</span>
<div style="text-align: left;"><span style="font-weight: bold;">Note</span>:
The current JBoss Messaging distribution is a <span
 style="font-style: italic;"></span><span style="font-style: italic;">beta
</span><span style="font-style: italic;">release. </span>We advise
against using it in a production environment.<br>
<br>
</div>
<br>
<h2>Overview</h2>
This notes document an intermediate beta preview release of JBoss
Messaging.
In
its final production release, JBoss
Messaging will be a JMS 1.1 compliant JMS provider, based on a
completely
new design, which recycles a
limited number of JBossMQ well-designed sub-systems and replaces
everything else. The production release will show improvements in three
areas:<br>
<ul>
  <li>&nbsp;Increased performance under high load. The JBoss Messaging
internals are based on an asynchronous channel
architecture, which reduces the number of synchronization bottlenecks
and maximize the throughput of the system. The threading and the
persistence mechanism have been completely re-thought and
re-implemented. <br>
  </li>
  <li>Better high availability/load balancing features. JBossMQ is
essentially a singleton (hub and spoke server architecture).
Some HA features have been later bolted on it, but it lacks in-memory
replication of NON_PERSISTENT messages, distributed/replicated
destinations and transparent fail-over. JBoss Messaging will add these
features. However, production quality clustering will be available only
in the Messaging 1.2 release.<br>
  </li>
  <li>Better modular architecture. There is a clear distinction between
the reliable distributed messaging
core and the JMS facade. The implementation uses JBoss AOP and an
interceptor architecture to implement the JMS Facade. This architecture
permits advanced configurations, where behavior can be shifted back and
forth
from client to server, allowing deployment time configurable thinner or
thicker
clients and serverless JMS. <br>
  </li>
</ul>
<span style="font-style: italic;"></span><br>
The current release has been tested with
JBoss 4.x series and JBoss 5.0.0 Alpha.<br>
<br>
<h2>Contents</h2>
The JBoss Messaging release bundle includes the following files and
directories:<br>
<ul>
  <li><span style="font-family: monospace;">jboss-messaging-scoped.sar</span>
- the deployable JBoss service archive that contains JBoss Messaging
and its dependencies. For instructions on how to deploy the service, go
to the "Installation" section.</li>
  <li><span style="font-family: monospace;">jboss-messaging-client-scoped.sar</span>
- the client-side library that need to be in the classpath of the
client that opens a remote connection to the Messaging server. <br>
  </li>
  <li><span style="font-family: monospace;">examples</span><span
 style="font-family: times new roman,times,serif;"> </span>- a
collection of examples that should run out of the box and
help you validate the installation. Detailed instructions are provided
with each example, which range from very simple JMS queue and topic
examples to relatively sophisticated use cases in which EJBs and JCA
JMS ConnectionFactories are involved.<br>
  </li>
  <li><small><span style="font-family: courier new,courier,monospace;">util<span
 style="font-family: times new roman,times,serif;"> </span></span></small>-
a collection of scripts and <small><span
 style="font-family: courier new,courier,monospace;">ant </span></small>configuration
files that will help you
with installation, JBossMQ replacement and various other tasks.<br>
  </li>
  <li><span style="font-family: monospace;">src</span> - the expanded
JBoss Messaging source code. Note that JBoss Messaging cannot be built
using exclusively this source snapshot, which is provided here for
reference only. If you want to build JBoss Messaging from source,
follow
the instructions from the "Building JBoss Messaging from Sources"
section.<br>
  </li>
  <li><span style="font-family: monospace;">jboss-messaging-1.0.0.Beta1-src.zip</span>
- the zipped <span style="font-family: monospace;">src</span>
directory. The file can be directly installed into and use with a
debugger.<br>
  </li>
  <li><small><span style="font-family: courier new,courier,monospace;">jboss-messaging-test-results-1.0.0.Beta1.zip</span></small>
- the results of the release functional testuite run, in XML, text and
HTML format.</li>
  <li>This <span style="font-family: monospace;">README </span>file.<br>
  </li>
</ul>
<br>
<h2>Building JBoss Messaging from source</h2>
Building JBoss Messaging from source is optional. You don't need to do
it if you only want to use the binary distribution. <br>
<br>
In order to build this version of JBoss Messaging from source, you will
need to check out the whole JBoss AS source tree from the anonymous
JBoss CVS. Instructions on how to do this are available at <a
 href="http://wiki.jboss.org/wiki/Wiki.jsp?page=CVSRepository">http://wiki.jboss.org/wiki/Wiki.jsp?page=CVSRepository</a>.
The essential steps of the procedure are provided below:<br>
<br>
<div style="margin-left: 40px;"><span style="font-family: monospace;">cvs
co -r JBossMessaging_1_0_0_Beta1 jboss-head</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">cd jboss-head</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">./build/build.sh</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">cd jms</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">./build scoped-sar</span><br>
</div>
<br>
This will generate a <span style="font-family: monospace;">jboss-messaging-scoped.sar</span>
service archive and its corresponding <span
 style="font-family: monospace;">jboss-messaging-client-scoped.jar</span>
in <span style="font-family: monospace;">output/lib</span>.<br>
<br>
<br>
<h2>Messaging Installation with JBoss 4.x<br>
</h2>
<table style="width: 90%; text-align: left; margin-left: 40px;"
 border="0" cellpadding="20" cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; background-color: rgb(255, 255, 255);"><small><br>
      </small>
      <div style="text-align: justify;"><span
 style="font-family: monospace;"></span><span
 style="color: rgb(255, 0, 0); font-weight: bold;">A JBoss Messaging
1.0.0 Beta1 installation conflicts with the existing JBossMQ
instance that comes part of the standard JBoss 4.x distribution. In
order to install JBoss Messaging you will need to create a new JBoss
configuration, following one of the alternative procedures described
below.<br>
      </span></div>
      <span style="font-family: monospace;"><br
 style="font-family: monospace;">
      </span><span style="color: rgb(255, 0, 0);"></span></td>
    </tr>
  </tbody>
</table>
<br>
<br>
<br>
<h3>1. JBoss 4.x Messaging Installation - Automated Procedure</h3>
<span style="font-weight: bold;">1.1</span>. Set up the JBOSS_HOME
environment variable to point towards the JBoss 4.x installation you
want to use JBoss Messaging with.<br>
<br style="font-weight: bold;">
<span style="font-weight: bold;">1.2</span> Run the installation
script, available in the <small><span
 style="font-family: courier new,courier,monospace;">util </span></small>directory
of the release bundle. Note that you need <small><span
 style="font-family: courier new,courier,monospace;">ant </span></small>installed
and present in your path.<br>
<br>
<br>
<table style="width: 90%; text-align: left; margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; background-color: rgb(255, 255, 255);"><span
 style="font-family: monospace;"></span><span
 style="font-family: monospace;"> <span style="font-family: monospace;"><br>
&nbsp;cd util<br>
&nbsp;ant -f create-messaging-config.xml<br>
      <br style="font-family: monospace;">
      </span> </span><span style="color: rgb(255, 0, 0);"></span></td>
    </tr>
  </tbody>
</table>
<br>
The installation script will create a <small><span
 style="font-family: courier new,courier,monospace;">$JBOSS_HOME/server/messaging</span></small>
configuration.<br>
<br>
<br>
<br>
<h3>2. JBoss 4.x Messaging Installation - Alternative Manual Procedure</h3>
<span style="font-weight: bold;">1.</span> Create a new JBoss
configuration named <span style="font-family: monospace;">messaging. </span>
<h1><span style="font-family: monospace;"></span></h1>
<span style="font-family: monospace;"></span>The easiest way to create
the new configuration is to use the existing <span
 style="font-family: monospace;">default</span> configuration as a
template. Copy the directory <span style="font-family: monospace;">$JBOSS_HOME/server/default</span>
recursively, creating a new <span style="font-family: monospace;">messaging</span>
directory.<br>
<br>
<br>
<table style="width: 90%; text-align: left; margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; background-color: rgb(255, 255, 255);"><span
 style="font-family: monospace;"></span><span
 style="font-family: monospace;"> <span style="font-family: monospace;"><br>
&nbsp;cd $JBOSS_HOME/server<br>
&nbsp;cp -r default messaging<br>
      <br style="font-family: monospace;">
      </span> </span><span style="color: rgb(255, 0, 0);"></span></td>
    </tr>
  </tbody>
</table>
<br>
<span style="font-weight: bold;">2.</span> Save the existing <span
 style="font-family: monospace;">messaging/deploy/jms/jms-ra.rar </span>resource
adapter to the parent directory.<br>
<br>
<table style="width: 90%; text-align: left; margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; background-color: rgb(255, 255, 255);"><span
 style="font-family: monospace;"></span><span
 style="font-family: monospace;"> <span style="font-family: monospace;"><br>
&nbsp;cd $JBOSS_HOME/server/messaging/deploy/jms<br>
&nbsp;cp jms-ra.rar ..<br>
      <br style="font-family: monospace;">
      </span> </span><span style="color: rgb(255, 0, 0);"></span></td>
    </tr>
  </tbody>
</table>
<br>
<span style="font-weight: bold;">3.</span> Remove JBossMQ <span
 style="font-family: monospace;">jms</span> deployment directory from
the <span style="font-family: monospace;">messaging </span>configuration.<br>
<br>
<table style="width: 90%; text-align: left; margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; background-color: rgb(255, 255, 255);"><span
 style="font-family: monospace;"></span><span
 style="font-family: monospace;"> <span style="font-family: monospace;"><br>
&nbsp;cd $JBOSS_HOME/server/messaging/deploy<br>
&nbsp;rm -r jms<br>
      <br style="font-family: monospace;">
      </span> </span><span style="color: rgb(255, 0, 0);"></span></td>
    </tr>
  </tbody>
</table>
<span style="font-weight: bold;"><br>
4. </span>Add a <span style="font-family: monospace;">"messaging"</span>
security domain to the <span style="font-family: monospace;">$JBOSS_HOME/server/messaging/conf/login-config.xml
</span>security configuration file:<br>
<br>
<br>
<table style="width: 90%; text-align: left; margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; background-color: rgb(204, 204, 204);"><span
 style="font-family: monospace;"><br>
&nbsp;.......<br>
      <br>
&nbsp;&lt;application-policy name = "messaging"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;authentication&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;login-module
code = "org.jboss.security.auth.spi.UsersRolesLoginModule" flag =
"required"&gt;<br>
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&lt;module-option
name="unauthenticatedIdentity"&gt;guest&lt;/module-option&gt;<br>
&nbsp; &nbsp; &nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;module-option
name="usersProperties"&gt;messaging-users.properties&lt;/module-option&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &lt;module-option
name="rolesProperties"&gt;messaging-roles.properties&lt;/module-option&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;/login-module&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/authentication&gt;<br>
&nbsp;&lt;/application-policy&gt;<br>
      </span><span style="font-family: monospace;"><br>
&nbsp;......<br>
      <br>
      </span></td>
    </tr>
  </tbody>
</table>
<br>
<br>
<span style="font-weight: bold;">5.</span> Copy the Beta1 service
archive that comes as part of the
current Messaging distribution to the <span
 style="font-family: monospace;">messaging </span>configuration's
deployment directory.<br>
<br>
<table style="width: 90%; text-align: left; margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; background-color: rgb(255, 255, 255);"><span
 style="font-family: monospace;"></span><span
 style="font-family: monospace;"> <span style="font-family: monospace;"><br>
&nbsp;cp jboss-messaging-scoped.sar $JBOSS_HOME/server/messaging/deploy<br>
      <br style="font-family: monospace;">
      </span> </span><span style="color: rgb(255, 0, 0);"></span></td>
    </tr>
  </tbody>
</table>
<span style="font-weight: bold;"><br>
6.</span> Shut down any JBoss instance that may be running on your test
machine.<br>
<br>
<span style="font-weight: bold;">7.</span> Start the JBoss instance
with the <span style="font-family: monospace;">messaging </span>configuration.<br>
<br>
<table style="width: 90%; text-align: left; margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; background-color: rgb(255, 255, 255);"><span
 style="font-family: monospace;"></span><span
 style="font-family: monospace;"> <span style="font-family: monospace;"><br>
&nbsp;cd $JBOSS_HOME/bin<br>
&nbsp;./run.sh -c messaging<br>
      <br style="font-family: monospace;">
      </span> </span><span style="color: rgb(255, 0, 0);"></span></td>
    </tr>
  </tbody>
</table>
<span style="font-weight: bold;"><br>
</span><span style="font-family: monospace;"></span>A successful JBoss
Messaging deployment generates logging output similar to:<br>
<br>
<table style="width: 90%; text-align: left; margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; background-color: rgb(204, 204, 204);"><span
 style="font-family: monospace;"><br>
.......<br>
      <br>
      </span><span style="font-family: monospace;">17:29:41,466
INFO&nbsp; [ServerPeer] ServerPeer (id=0) starting<br>
17:29:41,926 INFO&nbsp; [SecurityManager] JMS SecurityManager
initialized<br>
17:29:42,066 INFO&nbsp; [ServerPeer] JMS ServerPeer (id=0) started<br>
17:29:42,086 INFO&nbsp; [DestinationManagerImpl] Topic testTopic
created and bound in JNDI as /topic/testTopic<br>
17:29:42,086 INFO&nbsp; [Topic] Topic:testTopic started<br>
17:29:42,086 INFO&nbsp; [DestinationManagerImpl] Topic securedTopic
created and bound in JNDI as /topic/securedTopic<br>
17:29:42,086 INFO&nbsp; [Topic] Topic:securedTopic started<br>
17:29:42,086 INFO&nbsp; [DestinationManagerImpl] Topic testDurableTopic
created and bound in JNDI as /topic/testDurableTopic<br>
17:29:42,086 INFO&nbsp; [Topic] Topic:testDurableTopic started<br>
17:29:42,106 INFO&nbsp; [DestinationManagerImpl] Queue testQueue
created and bound in JNDI as /queue/testQueue<br>
17:29:42,106 INFO&nbsp; [Queue] Queue:testQueue started<br>
17:29:42,106 INFO&nbsp; [DestinationManagerImpl] Queue DLQ created and
bound in JNDI as /queue/DLQ<br>
17:29:42,106 INFO&nbsp; [Queue] Queue:DLQ started<br>
17:29:42,116 INFO&nbsp; [DestinationManagerImpl] Queue A created and
bound in JNDI as /queue/A<br>
17:29:42,116 INFO&nbsp; [Queue] Queue:A started<br>
17:29:42,116 INFO&nbsp; [DestinationManagerImpl] Queue B created and
bound in JNDI as /queue/B<br>
17:29:42,116 INFO&nbsp; [Queue] Queue:B started<br>
17:29:42,387 INFO&nbsp; [DestinationManagerImpl] Queue C created and
bound in JNDI as /queue/C<br>
17:29:42,387 INFO&nbsp; [Queue] Queue:C started<br>
17:29:42,397 INFO&nbsp; [DestinationManagerImpl] Queue D created and
bound in JNDI as /queue/D<br>
17:29:42,397 INFO&nbsp; [Queue] Queue:D started<br>
17:29:42,397 INFO&nbsp; [DestinationManagerImpl] Queue ex created and
bound in JNDI as /queue/ex<br>
17:29:42,397 INFO&nbsp; [Queue] Queue:ex started<br>
      <br>
......<br>
      <br>
      </span></td>
    </tr>
  </tbody>
</table>
<br>
<br>
<span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"></span></span>You
can use a number of simple JMS examples that are
provided
with the release to validate the deployment. Each example has its own <span
 style="font-family: monospace;">README.html</span> file that
contains instructions on how to run it. The
readme files and the source code are available under the <span
 style="font-family: monospace;">examples</span> directory.<br>
<br>
<br>
<h2>JBoss Messaging Links</h2>
JBoss Messaging home page: <a
 href="http://www.jboss.org/wiki/Wiki.jsp?page=JBossMessaging">http://www.jboss.org/wiki/Wiki.jsp?page=JBossMessaging</a><br>
JBoss Messaging project roadmap: <a
 href="http://jira.jboss.org/jira/browse/JBMESSAGING?report=com.atlassian.jira.plugin.system.project:roadmap-panel">http://jira.jboss.org/jira/browse/JBMESSAGING?report=com.atlassian.jira.plugin.system.project:roadmap-panel</a><br>
JBoss Messaging design forum: <a
 href="http://www.jboss.org/index.html?module=bb&amp;op=viewforum&amp;f=153">http://www.jboss.org/index.html?module=bb&amp;op=viewforum&amp;f=153</a><br>
JBoss Messaging CVS: <a
 href="http://anoncvs.forge.jboss.com:8080/viewrep/JBoss/jboss-jms">http://anoncvs.forge.jboss.com:8080/viewrep/JBoss/jboss-jms</a><br>
<br>
<hr style="width: 100%; height: 2px;">
</body>
</html>
