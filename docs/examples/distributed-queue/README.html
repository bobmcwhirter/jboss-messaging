<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>JBoss Messaging Example - Distributed Queue</title>
</head>
<body>
<br>
<h1>JBoss Messaging Distributed Queue Example</h1>
$Revision: 1017 $
<h2>Overview</h2>
<br>
This example demonstrates how to write JMS code that connects to a
JBoss Messaging cluster and sends messages to a distributed queue.
The example creates two connections to two distinct cluster nodes
on which we have previously deployed a distributed queue.
The example sends and receives messages using both connections.
<br>
<br>
<span style="font-weight: bold;">Note</span><br>
<div style="margin-left: 40px;">This is an example that assumes a
NullMessagePullPolicy.
This is the default configuration option a release ships with,
and also is a very boring options, since messages are <span
 style="font-weight: bold;">NOT</span>
redistributed among nodes.
An example that assumes a DefaultMessagePullPolicy is coming
soon (<a href="http://jira.jboss.org/jira/browse/JBMESSAGING-907">http://jira.jboss.org/jira/browse/JBMESSAGING-907</a>).
<br>
</div>
<br>
This example relies on having access to a running JBoss Messaging
cluster with at least two nodes. The JBoss Messaging cluster must be
installed and started according to the user guide.
<br>
<br>
<span style="font-style: italic;"></span><br>
<h2>Running the example</h2>
<span style="font-family: monospace;"></span><span
 style="font-family: monospace;"></span><br>
1. Make sure that a JBoss Messaging cluster with at least two nodes is
up and running.<br>
<br>
2. Go to the example's home directory<br>
<br>
<div style="margin-left: 40px;"><span style="font-family: monospace;">cd
...\examples\distributed-queue</span><br>
</div>
<br>
3. Run the example:<br>
<br>
<div style="margin-left: 40px;"><span style="font-family: monospace;">ant</span>
<br>
<br>
<br>
</div>
The output of a successful run should be similar to:<br>
<div style="margin-left: 40px;"><br>
</div>
<table
 style="width: 90%; text-align: left; font-family: monospace; background-color: rgb(204, 204, 204); margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><br>
      </div>
$ ant<br>
Buildfile: build.xml<br>
      <br>
identify:<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo]
###########################################################################<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo]
#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Running the DISTRIBUTED QUEUE
example&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
#<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo]
###########################################################################<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo] The
topic:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; testDistributedQueue<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo] The client jar:
../../../output/lib/jboss-messaging-client.jar<br>
      <br>
sanity-check:<br>
      <br>
init:<br>
&nbsp;&nbsp;&nbsp; [mkdir] Created dir:
C:\work\src\svn\messaging\docs\examples\distributed-queue\output<br>
&nbsp;&nbsp;&nbsp; [mkdir] Created dir:
C:\work\src\svn\messaging\docs\examples\common\output<br>
      <br>
compile:<br>
&nbsp;&nbsp;&nbsp; [javac] Compiling 2 source files to
C:\work\src\svn\messaging\docs\examples\common\output<br>
&nbsp;&nbsp;&nbsp; [javac] Compiling 2 source files to
C:\work\src\svn\messaging\docs\examples\distributed-queue\output<br>
      <br>
run:<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] Distributed queue
/queue/testDistributedQueue exists<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] The message was successfully sent
to the distributed queue<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] MessageListener0 received message:
Hello!<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] MessageListener1 received message:
Another Hello!<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] The example connected to JBoss
Messaging version 1.3.0.GA (1.3)<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] #####################<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] ###&nbsp;&nbsp;&nbsp;
SUCCESS!&nbsp;&nbsp; ###<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] #####################<br>
      <br>
BUILD SUCCESSFUL<br>
Total time: 4 seconds<br>
      <br>
      <br>
      </td>
    </tr>
  </tbody>
</table>
<div style="margin-left: 40px;"><br>
</div>
<br>
<br>
<br>
<hr style="width: 100%; height: 2px;"><br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
