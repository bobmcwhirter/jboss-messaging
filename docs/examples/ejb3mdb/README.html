<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>JBoss Messaging Example - EJB3 Message Driven Bean</title>
</head>
<body>
<br>
<h1>JBoss Messaging EJB3 Message Driven Bean Example</h1>
$Revision$
<h2>Overview</h2>
<br>
This example deploys a simple EJB3 Message Driven Bean that processes
messages sent to a test queue.&nbsp; Once it receives a message and
"processes" it, the EJB3 MDB sends an acknowledgment message to a&nbsp;
temporary destination created by the sender for this purpose. The
example is considered&nbsp; successful if the sender receives the
acknowledgment message.<br>
<br>
<span style="font-style: italic;"></span><br>
<h2>Running the example</h2>
1. Set up the JBOSS_HOME environment variable to point to the JBoss
instance you deployed JBoss Messaging into. For example, if you
deployed JBoss Messaging in <span style="font-family: monospace;">C:\jboss-4.2.0.GA\server\default\deploy</span>
then your JBOSS_HOME value should be <span
 style="font-family: monospace;">C:\</span><span
 style="font-family: monospace;">jboss-4.2.0.GA</span><br>
<span style="font-family: monospace;"><br>
</span><br>
2. Go to the example's home directory<br>
<br>
<div style="margin-left: 40px;"><span style="font-family: monospace;">cd
...\examples\ejb3mdb</span><br>
</div>
<br>
3. Run the example:<br>
<br>
<div style="margin-left: 40px;"><span style="font-family: monospace;">ant</span>
<br>
<br>
<br>
</div>
The output of a successful run should be similar to:<br>
<div style="margin-left: 40px;"><br>
</div>
<table
 style="width: 90%; text-align: left; font-family: monospace; background-color: rgb(204, 204, 204); margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><br>
      </div>
$ ant<br>
Buildfile: build.xml<br>
      <br>
identify:<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo]
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo]
X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Running the EJB3 MDB
example&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
X<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo]
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo] The queue: testQueue<br>
      <br>
sanity-check:<br>
      <br>
init:<br>
&nbsp;&nbsp;&nbsp; [mkdir] Created dir:
C:\work\src\cvs\jboss-head\jms\docs\examples\ejb3mdb\output\classes\META-INF<br>
&nbsp;&nbsp;&nbsp; [mkdir] Created dir:
C:\work\src\cvs\jboss-head\jms\docs\examples\ejb3mdb\output\lib\META-INF<br>
&nbsp;&nbsp;&nbsp; [mkdir] Created dir:
C:\work\src\cvs\jboss-head\jms\docs\examples\common\output<br>
      <br>
compile:<br>
&nbsp;&nbsp;&nbsp; [javac] Compiling 2 source files to
C:\work\src\cvs\jboss-head\jms\docs\examples\common\output<br>
&nbsp;&nbsp;&nbsp; [javac] Compiling 2 source files to
C:\work\src\cvs\jboss-head\jms\docs\examples\ejb3mdb\output\classes<br>
      <br>
jar:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [jar] Building jar:
C:\work\src\cvs\jboss-head\jms\docs\examples\ejb3mdb\output\lib\mdb-example.ejb3<br>
      <br>
deploy:<br>
&nbsp;&nbsp;&nbsp;&nbsp; [copy] Copying 1 file to
C:\work\src\jboss-4.0.3SP1-src\build\output\jboss-4.0.3SP1\server\messaging\deploy<br>
      <br>
sleep:<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo] Sleeping for 5 seconds ...<br>
      <br>
run:<br>
      <br>
send:<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] Queue /queue/testQueue exists<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] The Hello! message was successfully
sent to the testQueue queue<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] Received message: !olleH<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] The example connected to JBoss
Messaging version 1.3.0.GA (1.3)<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] #####################<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] ###&nbsp;&nbsp;&nbsp;
SUCCESS!&nbsp;&nbsp; ###<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] #####################<br>
      <br>
undeploy:<br>
&nbsp;&nbsp; [delete] Deleting:
C:\work\src\jboss-4.2.0.GA\build\output\jboss-4.0.3SP1\server\messaging\deploy\mdb-example.ejb3<br>
      <br>
BUILD SUCCESSFUL<br>
Total time: 10 seconds<br>
      <br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<h2>Troubleshooting</h2>
<br>
<h3>2. I get <span style="font-family: monospace;">"javax.jms.JMSSecurityException:
User null is NOT authenticated" <br>
</span></h3>
You probably didn't install JBoss Messaging correctly. A fresh JBoss
Messaging installation requires changes in the security configuration
of a <span style="font-family: monospace;">default </span>JBoss
instance, specifically a properly configured "<small><span
 style="font-family: courier new,courier,monospace;">messaging</span></small>"
security domain.&nbsp; Follow the instructions from the "Installation"
paragraph of the release documentation. <br>
<br>
<br style="font-family: courier new,courier,monospace;">
<hr
 style="width: 100%; height: 2px; font-family: courier new,courier,monospace;"><br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
