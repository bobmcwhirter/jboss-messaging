<?xml version="1.0" encoding="UTF-8"?>

<!--
     HTTPt Transport Example.

     $Id$
 -->

<server>

   <loader-repository>jboss.messaging:loader=ScopedLoaderRepository
       <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
   </loader-repository>

   <!--
        This Connector will basically run as a standalone http server
   -->
   <mbean code="org.jboss.remoting.transport.Connector"
      name="jboss.messaging:service=Connector,transport=HTTP"
      display-name="Messaging HTTP transport Connector">

      <!--
           Since there are no special configuration properties for this invoker, will just use
           the following to declare the invoker and not within the 'invoker' element within the
           'Configuration' attribute below. IMPORTANT to note can only be either 'InvokerLocator'
           attribute OR 'invoker' element, not both.
      -->
      <attribute name="InvokerLocator">http://${jboss.bind.address}:7488</attribute>
      <attribute name="Configuration">
         <config>
            <handlers>
               <handler subsystem="JMS">org.jboss.jms.server.remoting.JMSServerInvocationHandler</handler>
            </handlers>
         </config>
      </attribute>
   </mbean>

   <mbean code="org.jboss.jms.server.connectionfactory.ConnectionFactory"
      name="jboss.messaging.destination:service=SecureConnectionFactory"
      xmbean-dd="xmdesc/ConnectionFactory-xmbean.xml">
      <depends optional-attribute-name="ServerPeer">jboss.messaging:service=ServerPeer</depends>
      <depends optional-attribute-name="Connector">jboss.messaging:service=Connector,transport=HTTP</depends>
      <attribute name="JNDIBindings">
         <bindings>
            <binding>/HttpConnectionFactory</binding>
         </bindings>
      </attribute>
   </mbean>

</server>