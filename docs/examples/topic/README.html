<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>JBoss Messaging Example - JMS Topic</title>
</head>
<body>
<br>
<h1>JBoss Messaging Topic Example</h1>
$Revision$
<h2>Overview</h2>
<br>
This example creates a JMS Connection to a JBoss Messaging instance
and uses it to create a session, a publisher and a subscriber. The
publisher sends a message to the topic. The example is considered
successful
if the topic subscriber receives the message.<br>
<br>
This example relies on access to a running JBoss Messaging instance.
The JBoss Messaging instance must be deployed according to the
"Installation" paragraph from the release documentation.&nbsp; However,
the example will automatically deploy its own topic, unless a topic
with the same name is already deployed. <br>
<br>
<span style="font-style: italic;">The example was designed to work with
a </span><span style="font-family: monospace; font-style: italic;">jboss-messaging-scoped.sar</span><span
 style="font-style: italic;">
archive deployed under JBoss' </span><span
 style="font-family: monospace; font-style: italic;">default</span><span
 style="font-style: italic;">
configuration. If you change any of these elements, please modify the
example's</span><span
 style="font-family: monospace; font-style: italic;"> build.xml</span><span
 style="font-style: italic;">
accordingly.</span><br>
<br>
<h2>Running the example</h2>
1. Set up the JBOSS_HOME environment variable to point to the JBoss
instance you deployed JBoss Messaging into. For example, if you
deployed JBoss Messaging in <span style="font-family: monospace;">C:\jboss-4.0.3SP1\server\default\deploy,</span>
then your JBOSS_HOME value should be <span
 style="font-family: monospace;">C:\</span><span
 style="font-family: monospace;">jboss-4.0.3SP1.</span><br>
<span style="font-family: monospace;"><br>
</span>Remember that the example's build script expects to find <span
 style="font-family: monospace;">jboss-messaging-scoped.sar</span> under<span
 style="font-family: monospace;"> $JBOSS_HOME/server/default/deploy</span>.
If you use a deployment archive with a different name or a different
JBoss
configuration, please modify the example's <span
 style="font-family: monospace;">build.xml</span> accordingly.<br>
<br>
<span style="font-family: monospace;"><br>
</span><br>
2. Go to the example's home directory<br>
<br>
<div style="margin-left: 40px;"><span style="font-family: monospace;">cd
.. \examples\topic</span><br>
</div>
<br>
3. Run the example:<br>
<br>
<div style="margin-left: 40px;"><span style="font-family: monospace;">ant</span>
<br>
<br>
<br>
</div>
The output of a successful run should be similar to:<br>
<div style="margin-left: 40px;"><br>
</div>
<table
 style="width: 90%; text-align: left; font-family: monospace; background-color: rgb(204, 204, 204); margin-left: 40px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><br>
      </div>
$ ant<br>
Buildfile: build.xml<br>
      <br>
identify:<br>
&nbsp;&nbsp;&nbsp;&nbsp; [echo] Running the topic example<br>
      <br>
sanity-check:<br>
      <br>
init:<br>
      <br>
compile:<br>
&nbsp;&nbsp;&nbsp; [javac] Compiling 1 source file to
C:\work\src\cvs\jboss-head\jms\docs\examples\topic\output<br>
      <br>
run:<br>
&nbsp;&nbsp;&nbsp; [unjar] Expanding:
C:\work\src\jboss-4.0.3SP1-src\build\output\jboss-4.0.3SP1\server\default\deploy\jboss-messaging-scoped.sar
into C:\work\src\cvs\jboss-head\jms\docs\examples<br>
\topic\output<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] Topic /topic/testTopic exists<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] The message was successfully published
on the topic<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] Received message: Hello!<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] The example connected to JBoss
Messaging version 1.0.0.Beta1 (1.0)<br>
&nbsp;&nbsp;&nbsp;&nbsp; [java] The example executed successfully<br>
      <br>
BUILD SUCCESSFUL<br>
Total time: 8 seconds<br>
      <br>
      <br>
      </td>
    </tr>
  </tbody>
</table>
<div style="margin-left: 40px;"><br>
</div>
<br>
<br>
<h2>Troublesooting</h2>
<h3>1. I get <span style="font-family: monospace;">"javax.jms.JMSSecurityException:
User null is NOT authenticated" <br>
</span></h3>
You probably didn't install JBoss Messaging correctly. A fresh JBoss
Messaging installation requires changes in the security configuration
of a <span style="font-family: monospace;">default </span>JBoss
instance, specifically a properly configured "<small><span
 style="font-family: courier new,courier,monospace;">messaging</span></small>"
security domain.&nbsp; Follow the instructions from the "Installation"
paragraph of the release documentation. <br>
<br>
<br>
<hr style="width: 100%; height: 2px;"><br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
