<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE project [
      <!ENTITY libraries SYSTEM "../../../thirdparty/libraries.ent">
      ]>

<!-- =========================================================================================== -->
<!--                                                                                             -->
<!-- JBoss, Home of Professional Open Source                                                     -->
<!-- Copyright 2005, JBoss Inc., and individual contributors as indicated                        -->
<!-- by the @authors tag. See the copyright.txt in the distribution for a                        -->
<!-- full listing of individual contributors.                                                    -->
<!--                                                                                             -->
<!-- This is free software; you can redistribute it and/or modify it                             -->
<!-- under the terms of the GNU Lesser General Public License as                                 -->
<!-- published by the Free Software Foundation; either version 2.1 of                            -->
<!-- the License, or (at your option) any later version.                                         -->
<!--                                                                                             -->
<!-- This software is distributed in the hope that it will be useful,                            -->
<!-- but WITHOUT ANY WARRANTY; without even the implied warranty of                              -->
<!-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU                            -->
<!-- Lesser General Public License for more details.                                             -->
<!--                                                                                             -->
<!-- You should have received a copy of the GNU Lesser General Public                            -->
<!-- License along with this software; if not, write to the Free                                 -->
<!-- Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA                          -->
<!-- 02110-1301 USA, or see the FSF site: http://www.fsf.org.                                    -->
<!--                                                                                             -->
<!-- =========================================================================================== -->


<project default="run" name="JBoss Messaging Example with Micro Container">

   <import file="../../common/build.xml"/>

   <!-- We use a minimal classpath on this example -->
   <path id="local.classpath">
      <fileset dir="${jbm.jars.dir}">
        <include name="jbm-core.jar"/>
        <include name="jbm-transports.jar"/>
        <include name="jbm-bootstrap.jar"/>
        <include name="jbm-jbossas-security.jar"/>	
      </fileset>
   	  <fileset dir="${jars.dir}">
        <include name="netty/lib/*jar"/>
        <include name="jboss/microcontainer/lib/jboss-dependency.jar"/>
        <include name="jboss/microcontainer/lib/jboss-kernel.jar"/>

   	  	<include name="jboss/jboss-common-logging-spi/lib/*.jar"/>
   	  	<include name="jboss/jboss-reflect/lib/jboss-reflect.jar"/>
   	  	<include name="jboss/common-core/lib/jboss-common-core.jar"/>
   	  	<include name="jboss/jboss-mdr/lib/jboss-mdr.jar"/>
   	  	<include name="jboss/jbossxb/lib/jboss-xml-binding.jar"/>
   	  	<include name="sun-jaxb/lib/jaxb-api.jar"/>
   	  	<include name="jboss/aop/lib/jboss-aop.jar"/>
   	  	<include name="trove/lib/trove.jar"/>
   	  	<include name="javassist/lib/javassist.jar"/>
   	  	<exclude name="**/*-sources.jar"/>
   	  	
   	  	
   	 
        <!-- <include name="**/*.jar"/>
         -->
   	  </fileset>
    <pathelement location="${classes.dir}"/>	   	
    <pathelement location="./server0"/>	   	
   </path>

	<target name="run" depends="compile">
	   <java classname="org.jboss.core.example.EmbeddedMicroContainerExample" fork="true" resultproperty="example-result">
	      <jvmarg value="-Xms50M"/>      
	      <jvmarg value="-Xmx50M"/>
	      <classpath refid="local.classpath"/>
	   </java>
       <fail message="EmbeddedMicroContainerExample failed">
          <condition>
             <not>
                <equals arg1="${example-result}" arg2="0"/>
             </not>
          </condition>
       </fail>

   </target>
</project>
