<benchmark>

   <!-- benchmark configuration -->
   <db-url>jdbc:hsqldb:./output/db/perfdb</db-url>
   <report-directory>./output/results</report-directory>
   <color-step>15</color-step>

   <!-- benchmark-wide test defaults -->

   <default-executor-url>rmi://localhost:7777/remote</default-executor-url>
   <destination>/queue/testQueue</destination>
   <connection-factory>/ConnectionFactory</connection-factory>
   <acknowledgment-mode>AUTO_ACKNOWLEDGE</acknowledgment-mode>
   <delivery-mode>NON_PERSISTENT</delivery-mode>
   <message-factory-class>org.jboss.jms.perf.framework.factories.MessageMessageFactory</message-factory-class>
   <message-size>0</message-size>

   <!-- safeguard for receive jobs that block waiting messages will never arrive -->
   <duration>60000</duration>

   <providers>

      <provider name="JBossMessaging">
         <factory>org.jnp.interfaces.NamingContextFactory</factory>
         <url>jnp://localhost:1099</url>
         <pkg>org.jboss.naming:org.jnp.interfaces</pkg>
         <executor name="REMOTE" url="rmi://localhost:7777/remote"/>
         <executor name="REMOTE2" url="rmi://localhost:7777/remote2"/>
         <executor name="LOCAL" url="rmi://localhost:7777/local-messaging"/>
         <executor name="LOCAL2" url="rmi://localhost:7777/local-messaging2"/>
         <color>0,0,255</color>
      </provider>

      <provider name="JBossMQ">
         <factory>org.jnp.interfaces.NamingContextFactory</factory>
         <url>jnp://localhost:1199</url>
         <pkg>org.jboss.naming:org.jnp.interfaces</pkg>
         <executor name="REMOTE" url="rmi://localhost:7777/remote"/>
         <executor name="REMOTE2" url="rmi://localhost:7777/remote2"/>
         <executor name="LOCAL" url="rmi://localhost:7777/local-jbossmq"/>
         <executor name="LOCAL2" url="rmi://localhost:7777/local-jbossmq2"/>
         <color>255,0,0</color>
      </provider>
   </providers>

   <performance-tests>

      <!-- just makes sure the executors are deployed and ready -->
      <!--
      <performance-test name="Ping" loops="1">
         <ping executor="REMOTE"/>
         <ping executor="REMOTE2"/>
         <ping executor="LOCAL"/>
         <ping executor="LOCAL2"/>
         <parallel>
            <ping executor="REMOTE"/>
            <ping executor="REMOTE2"/>
            <ping executor="LOCAL"/>
            <ping executor="LOCAL2"/>
         </parallel>
         <execution provider="JBossMessaging"/>
         <execution provider="JBossMQ"/>
      </performance-test>
      -->

      <!--
      <performance-test name="Single Burst" loops="10">
         <destination>/queue/simpleQueue</destination>
         <message-size>0</message-size>
         <messages>30000</messages>
         <drain executor="LOCAL"/>
         <send rate="10000" executor="REMOTE"/>
         <execution provider="JBossMessaging"/>
      </performance-test>
      -->

      <!--
      <performance-test name="Measured Send Rate vs. Intended Send Rate" loops="1">

         <graph>
            <x job="send" metric="rate" label="intended send rate (msg/s)"/>
            <y job="send" metric="rate" label="measured send rate (msg/s)" result="true"/>
         </graph>

         <destination>/queue/simpleQueue</destination>
         <delivery-mode>NON_PERSISTENT</delivery-mode>
         <message-size>0</message-size>
         <messages>50000</messages>

         <drain executor="LOCAL"/>
         <send rate="500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1500" executor="LOCAL"/>

         <execution provider="JBossMessaging"/>
         <execution provider="JBossMQ"/>
      </performance-test>
     -->

      <!--
      <performance-test name="ReceiveRateVsSendRate">

         <graph>
            <x job="send" result="no" metric="rate" label="target send rate (msg/s)"/>
            <y job="receive" result="yes" metric="rate" label="measured receive rate (msg/s)" />
         </graph>

         <destination>/queue/simpleQueue</destination>
         <delivery-mode>NON_PERSISTENT</delivery-mode>
         <message-size>0</message-size>
         <messages>2000</messages>

         <drain/>

         <parallel>
            <send rate="500" executor="LOCAL"/>
            <receive messages="2000" executor="LOCAL2"/>
         </parallel>

         <parallel>
            <send rate="1000" executor="LOCAL"/>
            <receive messages="2000" executor="LOCAL2"/>
         </parallel>

         <parallel>
            <send rate="1500" executor="LOCAL"/>
            <receive messages="2000" executor="LOCAL2"/>
         </parallel>

         <execution provider="JBossMessaging"/>
         <execution provider="JBossMQ"/>
      </performance-test>
      -->

      <!--

      <performance-test name="Send 50000 Non-Persistent Non-Transactional 0 KB Local">

         <graph>
            <x job="send" result="no" metric="rate" label="target send rate (msg/s)"/>
            <y job="send" result="yes" metric="rate" label="measured send rate (msg/s)" />
         </graph>

         <destination>/queue/simpleQueue</destination>
         <delivery-mode>NON_PERSISTENT</delivery-mode>
         <message-size>0</message-size>
         <messages>50000</messages>

         <drain executor="LOCAL"/>
         <send rate="500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="2000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="2500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="3000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="3500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="4000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="4500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="5000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="5500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="6000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="6500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="7000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="8000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="8500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="9000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="9500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="10000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="10500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="11000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="11500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="12000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="12500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="13000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="13500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="14000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="14500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="15000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="15500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="16000" executor="LOCAL"/>

         <execution provider="JBossMessaging"/>
         <execution provider="JBossMQ"/>
      </performance-test>

          -->

      <performance-test name="Send 20000 Non-Persistent Non-Transactional 1 KB Text Local" loops="3">

         <graph>
            <x job="send" result="no" metric="rate" label="target send rate (msg/s)"/>
            <y job="send" result="yes" metric="rate" label="measured send rate (msg/s)" />
         </graph>

         <destination>/queue/simpleQueue</destination>
         <delivery-mode>NON_PERSISTENT</delivery-mode>
         <message-factory-class>org.jboss.jms.perf.framework.factories.TextMessageFactory</message-factory-class>
         <message-size>1024</message-size>
         <messages>30000</messages>

         <drain executor="LOCAL"/>
         <send rate="500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="2000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="2500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="3000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="3500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="4000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="4500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="5000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="5500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="6000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="6500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="7000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="8000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="8500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="9000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="9500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="10000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="10500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="11000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="11500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="12000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="12500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="13000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="13500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="14000" executor="LOCAL"/>


         <execution provider="JBossMessaging"/>
         <execution provider="JBossMQ"/>
      </performance-test>



      <!--
      <performance-test name="Send 30000 Non-Persistent Non-Transactional 0 KB Remote">

         <graph>
            <x job="send" result="no" metric="rate" label="target send rate (msg/s)"/>
            <y job="send" result="yes" metric="rate" label="measured send rate (msg/s)" />
         </graph>

         <destination>/queue/simpleQueue</destination>
         <delivery-mode>NON_PERSISTENT</delivery-mode>
         <message-size>0</message-size>
         <messages>30000</messages>

         <drain executor="LOCAL"/>
         <send rate="500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="1000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="1500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="2000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="2500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="3000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="3500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="4000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="4500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="5000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="5500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="6000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="6500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="7000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="8000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="8500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="9000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="9500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="10000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="10500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="11000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="11500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="12000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="12500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="13000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="13500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="14000" executor="REMOTE"/>

         <execution provider="JBossMessaging"/>
         <execution provider="JBossMQ"/>
      </performance-test>
      -->

      <!--
      <performance-test name="Send 30000 Persistent Non-Transactional 0 KB Local">

         <graph>
            <x job="send" result="no" metric="rate" label="target send rate (msg/s)"/>
            <y job="send" result="yes" metric="rate" label="measured send rate (msg/s)" />
         </graph>

         <destination>/queue/simpleQueue</destination>
         <delivery-mode>PERSISTENT</delivery-mode>
         <message-size>0</message-size>
         <messages>30000</messages>

         <drain executor="LOCAL"/>
         <send rate="250" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="750" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1250" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="1750" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="2000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="2250" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="2500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="2750" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="3000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="3250" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="3500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="3750" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="4000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="4250" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="4500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="4750" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="5000" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="5250" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="5500" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="5750" executor="LOCAL"/>

         <drain executor="LOCAL"/>
         <send rate="6000" executor="LOCAL"/>

         <execution provider="JBossMessaging"/>
         <execution provider="JBossMQ"/>
      </performance-test>

      -->


      <!--
      <performance-test name="Send 30000 Persistent Non-Transactional 1 KB Text Remote">

         <graph>
            <x job="send" result="no" metric="rate" label="target send rate (msg/s)"/>
            <y job="send" result="yes" metric="rate" label="measured send rate (msg/s)" />
         </graph>

         <destination>/queue/simpleQueue</destination>
         <delivery-mode>PERSISTENT</delivery-mode>
         <message-factory-class>org.jboss.jms.perf.framework.factories.TextMessageFactory</message-factory-class>
         <message-size>1024</message-size>
         <messages>30000</messages>

         <drain executor="LOCAL"/>
         <send rate="250" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="750" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="1000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="1250" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="1500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="1750" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="2000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="2250" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="2500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="2750" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="3000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="3250" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="3500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="3750" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="4000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="4250" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="4500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="4750" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="5000" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="5250" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="5500" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="5750" executor="REMOTE"/>

         <drain executor="LOCAL"/>
         <send rate="6000" executor="REMOTE"/>

         <execution provider="JBossMessaging"/>
         <execution provider="JBossMQ"/>
      </performance-test>

      -->


   </performance-tests>

</benchmark>


