<?xml version="1.0" encoding="UTF-8"?>

<deployment xmlns="urn:jboss:bean-deployer:2.0">
   <bean name="ConfigurationHelper" class="org.jboss.test.messaging.tools.ConfigurationHelper">
      <property name="configuration"><inject bean="Configuration"/> </property>
   </bean>

   <bean name="JaasBinding" class="org.jboss.messaging.microcontainer.JndiBinder">
      <property name="jndiProperties">
         <inject bean="ConfigurationHelper" property="environment"/>
      </property>
      <property name="target">
         <inject bean="Jaas"/>
      </property>
      <property name="bindTo">java:/jaas/messaging</property>
   </bean>

   <bean name="Jaas" class="org.jboss.test.messaging.tools.container.MockJBossSecurityManager"/>

   <bean name="DSBinding" class="org.jboss.messaging.microcontainer.JndiBinder">
      <property name="jndiProperties">
         <inject bean="ConfigurationHelper" property="environment"/>
      </property>
      <property name="target">
         <inject bean="jboss.jca:name=DefaultDS,service=DataSourceBinding"/>
      </property>
      <property name="bindTo">java:/DefaultDS</property>
   </bean>

   <bean name="TMBinding" class="org.jboss.messaging.microcontainer.JndiBinder">
      <property name="jndiProperties">
         <inject bean="ConfigurationHelper" property="environment"/>
      </property>
      <property name="target">
         <inject bean="jboss:service=TransactionManager"/>
      </property>
      <property name="bindTo">java:/TransactionManager</property>
   </bean>
      

   <!--
   <bean class="org.jgroups.JChannelFactory" name="JChannelFactory">
   -->
      <!--mbean code="org.jgroups.JChannelFactory" name="jgroups.mux:name=Multiplexer" xmbean-dd="resource:META-INF/multiplexer-xmbean.xml" -->
      <!-- <property name="domain">jgroups.mux</property>
      <property name="multiplexerConfig">multiplexer-stacks.xml</property>
      <property name="exposeChannels">false</property>
      <property name="exposeProtocols">false</property>
      -->

      <!-- The address used to determine the node name  -->
      <!-- <attribute name="NodeAddress">${jboss.bind.address}</attribute> -->
   <!--
   </bean> -->

</deployment>